import{d as _,u as y,c as x,a as h,b as o,e as l,w as t,f as a,E,o as k,i as C,j as P,k as i,l as p,m as R,p as v,n as S,q,r as z,t as B,s as m,v as f,g as N}from"./index-D5Rhts30.js";import{a as Q}from"./index-Be1OEmQm.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"register-container"},I={class:"register-content"},U=_({__name:"RegisterView",setup(K){const g=N(),w=y(),n=m(),d=m(!1),s=m({username:"",password:"",confirmPassword:""}),b={username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"},{min:3,max:32,message:"ç”¨æˆ·åé•¿åº¦ä¸º3-32ä¸ªå­—ç¬¦",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"},{min:6,message:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½",trigger:"blur"}],confirmPassword:[{required:!0,message:"è¯·ç¡®è®¤å¯†ç ",trigger:"blur"},{validator:(c,e,r)=>{e!==s.value.password?r(new Error("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´")):r()},trigger:"blur"}]},u=async()=>{n.value&&await n.value.validate(async c=>{if(c){d.value=!0;try{const e=await Q.register(s.value.username,s.value.password);w.setAuth(e.data.token,e.data.user),e.data.user.is_admin?f.success("æ³¨å†ŒæˆåŠŸï¼æ‚¨æ˜¯ç¬¬ä¸€ä¸ªç”¨æˆ·ï¼Œå·²è‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜"):f.success("æ³¨å†ŒæˆåŠŸ"),g.push("/dashboard")}catch(e){const r=e.response?.data?.error||"æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•";f.error(r)}finally{d.value=!1}}})},V=()=>{g.push("/login")};return(c,e)=>(k(),x("div",F,[e[6]||(e[6]=h('<div class="bg-decoration" data-v-45bd2a71><div class="deco-circle deco-1" data-v-45bd2a71></div><div class="deco-circle deco-2" data-v-45bd2a71></div><div class="deco-circle deco-3" data-v-45bd2a71></div><div class="deco-leaf deco-leaf-1" data-v-45bd2a71></div><div class="deco-leaf deco-leaf-2" data-v-45bd2a71></div></div>',1)),o("div",I,[l(a(E),{class:"register-card"},{default:t(()=>[e[4]||(e[4]=o("div",{class:"card-header"},[o("div",{class:"logo-wrapper"},[o("span",{class:"logo-icon"},"ğŸŒ¾")]),o("h2",{class:"title"},"åˆ›å»ºè´¦å·"),o("p",{class:"subtitle"},"åŠ å…¥QQå†œåœºç®¡ç†ç³»ç»Ÿ")],-1)),l(a(C),{ref_key:"formRef",ref:n,model:s.value,rules:b,"label-position":"top",class:"register-form",onSubmit:P(u,["prevent"])},{default:t(()=>[l(a(i),{label:"ç”¨æˆ·å",prop:"username"},{default:t(()=>[l(a(p),{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value.username=r),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å (3-32å­—ç¬¦)","prefix-icon":a(R),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),l(a(i),{label:"å¯†ç ",prop:"password"},{default:t(()=>[l(a(p),{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>s.value.password=r),type:"password",placeholder:"è¯·è¾“å…¥å¯†ç  (è‡³å°‘6ä½)","prefix-icon":a(v),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),l(a(i),{label:"ç¡®è®¤å¯†ç ",prop:"confirmPassword"},{default:t(()=>[l(a(p),{modelValue:s.value.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=r=>s.value.confirmPassword=r),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥å¯†ç ","prefix-icon":a(v),size:"large","show-password":"",onKeyup:S(u,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),l(a(i),{class:"form-actions"},{default:t(()=>[l(a(q),{type:"primary",size:"large",loading:d.value,class:"register-btn",onClick:u},{default:t(()=>[z(B(d.value?"æ³¨å†Œä¸­...":"æ³¨ å†Œ"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),o("div",{class:"login-link"},[e[3]||(e[3]=o("span",null,"å·²æœ‰è´¦å·ï¼Ÿ",-1)),o("a",{onClick:V},"ç«‹å³ç™»å½•")])]),_:1}),e[5]||(e[5]=o("p",{class:"copyright"},"Â© 2024 QQå†œåœºç®¡ç†ç³»ç»Ÿ Â· è®©å†œåœºç®¡ç†æ›´ç®€å•",-1))])]))}}),L=A(U,[["__scopeId","data-v-45bd2a71"]]);export{L as default};
