import{d as V,u as y,c as x,a as l,b as o,w as t,e as s,E,o as k,h as C,i as P,j as n,k as m,l as R,n as w,m as q,p as z,q as v,t as B,r as f,s as c,f as S}from"./index-DZf8Hpes.js";import{a as A}from"./index-Be1OEmQm.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"register-container"},N={class:"register-bg"},U={class:"register-content"},K=V({__name:"RegisterView",setup(M){const g=S(),_=y(),u=f(),i=f(!1),r=f({username:"",password:"",confirmPassword:""}),b={username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"},{min:3,max:32,message:"ç”¨æˆ·åé•¿åº¦ä¸º3-32ä¸ªå­—ç¬¦",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"},{min:6,message:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½",trigger:"blur"}],confirmPassword:[{required:!0,message:"è¯·ç¡®è®¤å¯†ç ",trigger:"blur"},{validator:(p,e,a)=>{e!==r.value.password?a(new Error("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´")):a()},trigger:"blur"}]},d=async()=>{u.value&&await u.value.validate(async p=>{if(p){i.value=!0;try{const e=await A.register(r.value.username,r.value.password);_.setAuth(e.data.token,e.data.user),e.data.user.is_admin?c.success("æ³¨å†ŒæˆåŠŸï¼æ‚¨æ˜¯ç¬¬ä¸€ä¸ªç”¨æˆ·ï¼Œå·²è‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜"):c.success("æ³¨å†ŒæˆåŠŸ"),g.push("/dashboard")}catch(e){const a=e.response?.data?.error||"æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•";c.error(a)}finally{i.value=!1}}})},h=()=>{g.push("/login")};return(p,e)=>(k(),x("div",I,[l("div",N,[l("div",U,[o(s(E),{class:"register-card"},{header:t(()=>[...e[3]||(e[3]=[l("div",{class:"card-header"},[l("span",{class:"logo-icon"},"ğŸŒ¾"),l("h2",null,"æ³¨å†Œè´¦å·")],-1)])]),default:t(()=>[o(s(C),{ref_key:"formRef",ref:u,model:r.value,rules:b,"label-position":"top",onSubmit:P(d,["prevent"])},{default:t(()=>[o(s(n),{label:"ç”¨æˆ·å",prop:"username"},{default:t(()=>[o(s(m),{modelValue:r.value.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.username=a),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å (3-32å­—ç¬¦)","prefix-icon":s(R),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(s(n),{label:"å¯†ç ",prop:"password"},{default:t(()=>[o(s(m),{modelValue:r.value.password,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.password=a),type:"password",placeholder:"è¯·è¾“å…¥å¯†ç  (è‡³å°‘6ä½)","prefix-icon":s(w),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),o(s(n),{label:"ç¡®è®¤å¯†ç ",prop:"confirmPassword"},{default:t(()=>[o(s(m),{modelValue:r.value.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.confirmPassword=a),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥å¯†ç ","prefix-icon":s(w),size:"large","show-password":"",onKeyup:q(d,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),o(s(n),null,{default:t(()=>[o(s(z),{type:"primary",size:"large",loading:i.value,class:"register-btn",onClick:d},{default:t(()=>[v(B(i.value?"æ³¨å†Œä¸­...":"æ³¨ å†Œ"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",{class:"login-link"},[e[4]||(e[4]=v(" å·²æœ‰è´¦å·ï¼Ÿ",-1)),l("a",{onClick:h},"ç«‹å³ç™»å½•")])]),_:1}),e[5]||(e[5]=l("p",{class:"copyright"},"Â© 2024 QQå†œåœºç®¡ç†ç³»ç»Ÿ",-1))])])]))}}),L=F(K,[["__scopeId","data-v-7cd6af3e"]]);export{L as default};
