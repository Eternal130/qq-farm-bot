import{d as b,u as V,c as k,a,b as r,w as l,e as s,E as x,o as E,f as C,g as R,h as q,i as B,j as d,k as g,l as Q,m as S,n as z,p as A,q as f,t as F,r as p,s as v}from"./index-DZf8Hpes.js";import{a as I}from"./index-Be1OEmQm.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"login-container"},K={class:"login-bg"},M={class:"login-content"},T=b({__name:"LoginView",setup(U){const c=C(),_=R(),w=V(),i=p(),n=p(!1),o=p({username:"",password:""}),h={username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"},{min:6,message:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½",trigger:"blur"}]},u=async()=>{i.value&&await i.value.validate(async m=>{if(m){n.value=!0;try{const e=await I.login(o.value.username,o.value.password);w.setAuth(e.data.token,e.data.user),v.success("ç™»å½•æˆåŠŸ");const t=_.query.redirect;c.push(t||"/dashboard")}catch(e){const t=e.response?.data?.error||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç ";v.error(t)}finally{n.value=!1}}})},y=()=>{c.push("/register")};return(m,e)=>(E(),k("div",N,[a("div",K,[a("div",M,[r(s(x),{class:"login-card"},{header:l(()=>[...e[2]||(e[2]=[a("div",{class:"card-header"},[a("span",{class:"logo-icon"},"ğŸŒ¾"),a("h2",null,"QQå†œåœºç®¡ç†ç³»ç»Ÿ")],-1)])]),default:l(()=>[r(s(q),{ref_key:"formRef",ref:i,model:o.value,rules:h,"label-position":"top",onSubmit:B(u,["prevent"])},{default:l(()=>[r(s(d),{label:"ç”¨æˆ·å",prop:"username"},{default:l(()=>[r(s(g),{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.username=t),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å","prefix-icon":s(Q),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),r(s(d),{label:"å¯†ç ",prop:"password"},{default:l(()=>[r(s(g),{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.password=t),type:"password",placeholder:"è¯·è¾“å…¥å¯†ç ","prefix-icon":s(z),size:"large","show-password":"",onKeyup:S(u,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),r(s(d),null,{default:l(()=>[r(s(A),{type:"primary",size:"large",loading:n.value,class:"login-btn",onClick:u},{default:l(()=>[f(F(n.value?"ç™»å½•ä¸­...":"ç™» å½•"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),a("div",{class:"register-link"},[e[3]||(e[3]=f(" æ²¡æœ‰è´¦å·ï¼Ÿ",-1)),a("a",{onClick:y},"ç«‹å³æ³¨å†Œ")])]),_:1}),e[4]||(e[4]=a("p",{class:"copyright"},"Â© 2024 QQå†œåœºç®¡ç†ç³»ç»Ÿ",-1))])])]))}}),H=L(T,[["__scopeId","data-v-c51d5531"]]);export{H as default};
